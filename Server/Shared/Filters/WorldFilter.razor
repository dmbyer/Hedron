@inherits ComponentBase
@using Hedron.Core.Locale;

<label for="worldSelect" class="col-xl-1 col-form-label text-lg-left"><strong>World</strong></label>
<select id="worldSelect" class="col-xl-2 col-form-label" @bind="WorldID">
    <option value="-1">None</option>
    @foreach (var world in Worlds)
    {
        if (world.Prototype == SelectedWorld)
        {
            <option value="@world.Prototype" selected>@world.Name</option>
        }
        else
        {
            <option value="@world.Prototype">@world.Name</option>
        }
    }
</select>

@code {
    [Parameter]
    public EventCallback<uint?> OnWorldFilterChanged { get; set; }

    [Parameter]
    public List<World> Worlds { get; set; }

    [Parameter]
    public uint? SelectedWorld { get; set; }

    private int _worldID;
    private int WorldID
    {
        get => _worldID;
        set
        {
            _worldID = value;
            OnWorldFilterChanged.InvokeAsync(_worldID == -1 ? null : (uint?)_worldID);
        }
    }

    protected override void OnInitialized()
    {
        _worldID = -1;
    }

}